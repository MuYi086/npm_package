var s=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var c=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var u=(n,e)=>{for(var t in e)s(n,t,{get:e[t],enumerable:!0})},h=(n,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of c(e))!d.call(n,r)&&r!==t&&s(n,r,{get:()=>e[r],enumerable:!(a=g(e,r))||a.enumerable});return n};var p=n=>h(s({},"__esModule",{value:!0}),n);var l={};u(l,{imgToBase64:()=>m});module.exports=p(l);var o=class{async parse(e){let t=this;return typeof e=="object"?this.useCanvas(e):typeof e=="string"&&/^http[s]?:\/\/.*(png|jpg|jpeg|bmp|gif|svg|)$/.test(e)?t.loadImage(e).then(a=>t.useCanvas(a)).catch(a=>new Error(`Failed to load image: ${a.message}`)):Promise.reject(new Error("Invalid image source or format."))}loadImage(e){return new Promise((t,a)=>{let r=new Image;r.crossOrigin="anonymous",r.src=e+"?v="+Math.random(),r.onload=()=>t(r),r.onerror=i=>a(i)})}useCanvas(e){if(typeof uni<"u")return new Error("\u6682\u4E0D\u652F\u6301uniapp");{let t=document.createElement("canvas");t.width=e.width,t.height=e.height;let a=t.getContext("2d");return a?(a.drawImage(e,0,0,e.width,e.height),t.toDataURL("image/png")):new Error("Failed to get canvas context")}}},m=new o;
