var b=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var g=Object.prototype.hasOwnProperty;var T=(m,t)=>{for(var e in t)b(m,e,{get:t[e],enumerable:!0})},A=(m,t,e,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of p(t))!g.call(m,r)&&r!==e&&b(m,r,{get:()=>t[r],enumerable:!(a=D(t,r))||a.enumerable});return m};var w=m=>A(b({},"__esModule",{value:!0}),m);var S={};T(S,{calendar:()=>I});module.exports=w(S);var l=class{yearArr=[];monthArr=[];weekDay=[];gan=[];zhi=[];chineseZodiac=[];farmMonthArr=[];pingMonthArr=[];runMonthArr=[];farmDate=[];farmDateArr=[];today={};lastThreeMonthDay=[];currentMonthDay=[];currentMonthFarmDay=[];searchDay={year:1900,month:1,day:1};prevMonthObj={};nextMonthObj={};constructor(){this.init()}init(){for(let n=1900;n<2051;n++)this.yearArr.push(n);for(let n=0;n<12;n++)this.monthArr.push(n+1);this.weekDay="\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u65E5".split(""),this.gan="\u7532\u4E59\u4E19\u4E01\u620A\u5DF1\u5E9A\u8F9B\u58EC\u7678".split(""),this.zhi="\u5B50\u4E11\u5BC5\u536F\u8FB0\u5DF3\u5348\u672A\u7533\u9149\u620C\u4EA5".split(""),this.chineseZodiac="\u9F20\u725B\u864E\u5154\u9F99\u86C7\u9A6C\u7F8A\u7334\u9E21\u72D7\u732A".split(""),this.farmMonthArr=["\u6B63\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u814A\u6708"],this.pingMonthArr=["\u521D\u4E00","\u521D\u4E8C","\u521D\u4E09","\u521D\u56DB","\u521D\u4E94","\u521D\u516D","\u521D\u4E03","\u521D\u516B","\u521D\u4E5D","\u521D\u5341","\u5341\u4E00","\u5341\u4E8C","\u5341\u4E09","\u5341\u56DB","\u5341\u4E94","\u5341\u516D","\u5341\u4E03","\u5341\u516B","\u5341\u4E5D","\u4E8C\u5341","\u5EFF\u4E00","\u5EFF\u4E8C","\u5EFF\u4E09","\u5EFF\u56DB","\u5EFF\u4E94","\u5EFF\u516D","\u5EFF\u4E03","\u5EFF\u516B","\u5EFF\u4E5D"],this.runMonthArr=[...this.pingMonthArr,"\u4E09\u5341"],this.farmDate=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],this.farmDateArr=this.parseFarmInfoByHexCode(this.farmDate);let t=new Date,e=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();this.today=t,this.searchDay={year:e,month:a,day:r},this.searchLastThreeMonthDay(this.searchDay),this.calFarmInfo(this.searchDay)}reset(){this.lastThreeMonthDay=[],this.currentMonthDay=[]}searchLastThreeMonthDay(t){let{year:e,month:a}=t,r=a===1?`${e-1}/12/15`:`${e}/${a-1}/15`,n=a===12?`${e+1}/1/15`:`${e}/${a+1}/15`;this.prevMonthObj={year:a===1?e-1:e,month:a===1?12:a-1,day:15},this.nextMonthObj={year:a===12?e+1:e,month:a===12?1:a+1,day:15};let s=new Date(r).getTime(),h=new Date(n).getTime(),x=24*60*60*1e3,i=Math.floor((h-s)/x);for(let o=0;o<i;o++)this.lastThreeMonthDay.push(this.timeStampToDate(o*x+s));this.searchCurrentMonthDay(t)}timeStampToDate(t){let e=new Date(t),a=`${e.getFullYear()}/${e.getMonth()+1}/${e.getDate()}`,r=e.getDay();return{date:a,weekDay:r}}searchCurrentMonthDay(t){let e=`${t.year}/${t.month}/1`,a=new Date(t.year,t.month,0).getDate(),r=`${t.year}/${t.month}/${a}`,n=0,s=28;for(let o=0;o<this.lastThreeMonthDay.length;o++)if(this.lastThreeMonthDay[o].date===e&&(n=o),this.lastThreeMonthDay[o].date===r){s=o;break}let h=this.lastThreeMonthDay[n].weekDay==0?7:this.lastThreeMonthDay[n].weekDay,x=n-h,i=s+(6-this.lastThreeMonthDay[s].weekDay);for(let o=1;o<=i-x+1;o++){let d=this.lastThreeMonthDay[x+o],y=d.date.split("/").pop(),c=x+o>=n&&x+o<=s,u=d.weekDay===6||d.weekDay===0;this.currentMonthDay.push({date:y,isCurrentMonth:c,isHoliday:u})}}search(t){let e=t.split(""),a=[];e.forEach(n=>{a.push(isNaN(Number(n))?"|":n)});let r=this.arrTransToNum(a.join("").split("|"));this.reset(),this.searchDay={year:r[0],month:r[1],day:r[2]},this.searchLastThreeMonthDay(this.searchDay),this.calFarmInfo(this.searchDay)}arrTransToNum(t){let e=[];return t.forEach(a=>{e.push(Number(a))}),e}calFarmInfo(t){let{year:e,month:a,day:r}=t,n=new Date("1900/01/31").getTime(),s=new Date(`${e}/${a}/${r}`).getTime(),h=24*60*60*1e3,x=Math.floor((s-n)/h);this.currentMonthFarmDay=this.calCurrentMonthFarmInfo(this.currentMonthDay,this.farmDateArr,x)}parsetMonthInfo(t){let e=t.length,a=parseInt(t.slice(e-4,e),2),r=t.slice(0,e-4).split("");return r.length===11&&r.unshift("0","0"),r.length===12&&r.unshift("0"),[Number(r.shift()),r,a]}parseFarmInfoByHexCode(t){let e=[];for(let a=0;a<t.length;a++){let r=t[a].toString(2),n=this.parsetMonthInfo(r),s=n[0],h=n[1],x=n[2];for(let i=0;i<h.length;i++)(Number(h[i])===0?this.pingMonthArr:this.runMonthArr).forEach(d=>{let y=this.yearArr[a],c=this.farmMonthArr[i],M={year:y,month:c,day:d,isRunMonth:!1};e.push(M)}),x===this.monthArr[i]&&(s===0?this.pingMonthArr:this.runMonthArr).forEach(y=>{let c=this.yearArr[a],u=this.farmMonthArr[i],f={year:c,month:u,day:y,isRunMonth:!0};e.push(f)})}return e}calCurrentMonthFarmInfo(t,e,a){let r=0,n=0,s=[];for(let h=0;h<t.length;h++)if(t[h].isCurrentMonth){r=h,n=t.length-h;break}for(let h=a-r;h<a+n;h++){let{year:x,month:i,day:o}=this.farmDateArr[h],d=h>=a&&h<=a+t.length,y={year:x,month:i,day:o,isCurrentMonth:d};s.push(y)}return s}},I=new l;
