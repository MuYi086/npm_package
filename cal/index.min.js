class e{constructor(){this.suitArr=["0","1","2","3","4","5","6","7","8","9","."],this.signArr=["+","-","*","/"]}dealBracket(e){let t=(e=this.dropSign(e)).split(")").length-1;for(let r=0;r<t;r++){let t=e.indexOf(")"),r=e.substr(0,t+1).lastIndexOf("("),i=e.slice(r,t+1);e=e.slice(0,r)+this.dealNeedlessSign(i,1)+e.slice(t+1,e.length)}let r=this.cutStr(e);return this.simpleOperation(r)}dealNeedlessSign(e,t){1===t&&(e=e.slice(1,e.length-1));let r=this.cutStr(e);return this.simpleOperation(r)}simpleOperation(e){for(;e.length>=3;){let t=e.indexOf("*")>0,r=e.indexOf("/")>0;if(t)e=r?t<r?this.doOperation(e,"*"):this.doOperation(e,"/"):this.doOperation(e,"*");else if(r)e=this.doOperation(e,"/");else{let t=e.indexOf("+")>0,r=e.indexOf("-")>0;t?e=r?t<r?this.doOperation(e,"+"):this.doOperation(e,"-"):this.doOperation(e,"+"):r&&(e=this.doOperation(e,"-"))}}return e[0]}doOperation(e,t){for(;e.indexOf(t)>0&&e.indexOf(t)<e.length-1;){let r=e.indexOf(t),i="";"*"===t&&(i=Number(e[r-1])*Number(e[r+1])),"/"===t&&(i=Number(e[r-1])/Number(e[r+1])),"+"===t&&(i=Number(e[r-1])+Number(e[r+1])),"-"===t&&(i=Number(e[r-1])-Number(e[r+1])),e.splice(r-1,3,i)}return e}cutStr(e){let t=[],r="";for(let i=0;i<e.length;i++)i===e.length-1?(r+=e.charAt(i),t.push(r)):this.signArr.indexOf(e.charAt(i))>=0?"-"===e.charAt(i)?r.indexOf("-")<0?(""!==r&&t.push(r),r="-"):("-"===r||(t.push(r),t.push(e.charAt(i))),r=""):(""!==r&&t.push(r),t.push(e.charAt(i)),r=""):r+=e.charAt(i);let i=[];for(let e=0;e<t.length;e++)isNaN(Number(t[e-1]))||isNaN(Number(t[e]))||i.push(e);return i.reverse().forEach((e=>{t.splice(e,0,"+")})),t}dropSign(e){let t=e.split(""),r=[],i=[];for(let e in t)this.signArr.indexOf(t[e])>=0&&r.push(Number(e));return r.length>1&&r.reduce((function(e,t){return Number(t)-Number(e)==1&&i.push(Number(e)),t})),i.reverse().forEach((e=>{t.splice(e,1)})),t.reduce((function(e,t){return String(e)+t}))}}const t=new e;module.exports=t;