var u=class{suitArr=["0","1","2","3","4","5","6","7","8","9","."];signArr=["+","-","*","/"];constructor(){}dealBracket(e){e=this.dropSign(e);let l=e.split(")").length-1;for(let t=0;t<l;t++){let s=e.indexOf(")"),r=e.substr(0,s+1).lastIndexOf("("),h=e.slice(r,s+1);e=e.slice(0,r)+this.dealNeedlessSign(h,1)+e.slice(s+1,e.length)}let i=this.cutStr(e);return this.simpleOperation(i)}dealNeedlessSign(e,l){l===1&&(e=e.slice(1,e.length-1));let i=this.cutStr(e);return this.simpleOperation(i)}simpleOperation(e){for(;e.length>=3;){let l=e.indexOf("*")>0,i=e.indexOf("/")>0;if(l)i?l<i?e=this.doOperation(e,"*"):e=this.doOperation(e,"/"):e=this.doOperation(e,"*");else if(i)e=this.doOperation(e,"/");else{let n=e.indexOf("+")>0,t=e.indexOf("-")>0;n?t?n<t?e=this.doOperation(e,"+"):e=this.doOperation(e,"-"):e=this.doOperation(e,"+"):t&&(e=this.doOperation(e,"-"))}}return e[0]}doOperation(e,l){for(;e.indexOf(l)>0&&e.indexOf(l)<e.length-1;){let i=e.indexOf(l),n=-1;l==="*"&&(n=Number(e[i-1])*Number(e[i+1])),l==="/"&&(n=Number(e[i-1])/Number(e[i+1])),l==="+"&&(n=Number(e[i-1])+Number(e[i+1])),l==="-"&&(n=Number(e[i-1])-Number(e[i+1])),e.splice(i-1,3,n)}return e}cutStr(e){let l=[],i="";for(let t=0;t<e.length;t++)t===e.length-1?(i+=e.charAt(t),l.push(i)):this.signArr.includes(e.charAt(t))?e.charAt(t)==="-"?i.indexOf("-")<0?(i!==""&&l.push(i),i="-"):(i==="-"||(l.push(i),l.push(e.charAt(t))),i=""):(i!==""&&l.push(i),l.push(e.charAt(t)),i=""):i+=e.charAt(t);let n=[];for(let t=0;t<l.length;t++)!isNaN(Number(l[t-1]))&&!isNaN(Number(l[t]))&&n.push(t);return n.reverse().forEach(t=>{l.splice(t,0,"+")}),l}dropSign(e){let l=e.split(""),i=[],n=[];for(let t in l)this.signArr.includes(l[t])&&i.push(Number(t));return i.length>1&&i.reduce(function(t,s){return Number(s)-Number(t)===1&&n.push(Number(t)),s}),n.reverse().forEach(t=>{l.splice(t,1)}),l.reduce(function(t,s){return String(t)+s})}},a=new u;export{a as cal};
